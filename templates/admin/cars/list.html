{% extends "base.html" %}

{% block title %}Машины - Панель администратора{% endblock %}

{% block content %}
<h2>Управление машинами</h2>
<div class="mb-3">
    <a href="/admin/cars/create" class="btn btn-success">Добавить машину</a>
</div>
{% if cars %}
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Марка</th>
                <th>Модель</th>
                <th>Год</th>
                <th>Гос. номер</th>
                <th>Категория</th>
                <th>Цвет</th>
                <th>Статус</th>
                <th>Стоимость/день</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for car in cars %}
            <tr>
                <td>{{ car.id }}</td>
                <td>{{ car.brand }}</td>
                <td>{{ car.model }}</td>
                <td>{{ car.year }}</td>
                <td>{{ car.license_plate }}</td>
                <td>{{ car.category.name if car.category else 'Не указана' }}</td>
                <td>{{ car.color.name if car.color else 'Не указан' }}</td>
                <td>{{ car.status.name if car.status else 'Не указан' }}</td>
                <td>{{ car.daily_cost }} ₽</td>
                <td>
                    <a href="/cars/{{ car.id }}" class="btn btn-sm btn-primary">Просмотр</a>
                    <a href="/admin/cars/{{ car.id }}/edit" class="btn btn-sm btn-warning">Редактировать</a>
                    <form method="post" action="/admin/cars/{{ car.id }}/delete" style="display: inline;" onsubmit="return confirm('Вы уверены, что хотите удалить эту машину?');">
                        <button type="submit" class="btn btn-sm btn-danger">Удалить</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info">
    <p>Машины не найдены.</p>
</div>
{% endif %}
{% endblock %}

